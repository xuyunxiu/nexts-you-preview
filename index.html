<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Fan App</title>
  <style>
    :root {
      --bg: #fafafa;
      --card: #fff;
      --accent: #6c5ce7;
      --hover: #f0f0f0;
      --line: #ddd;
      --sub: #666;
      --ghost: #999;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: var(--bg);
      color: #222;
    }
    .hidden { display: none; }

    /* ===== å…¨åŸŸ ===== */
    .page {
      display: none;
      height: 100vh;
      overflow-y: auto;
    }
    .page.active {
      display: block;
    }
    .topbar {
      display: flex;
      align-items: center;
      padding: 12px;
      border-bottom: 1px solid var(--line);
      background: var(--card);
    }
    .menu-btn {
      margin-right: 12px;
    }

    /* ===== Story Bar ===== */
    .storyBar {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding: 12px;
      background: var(--card);
      border-bottom: 1px solid var(--line);
    }
    .storyCircle {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 12px;
      color: var(--sub);
      cursor: pointer;
    }
    .storyCircle img {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: 2px solid var(--accent);
      object-fit: cover;
      margin-bottom: 4px;
    }

    /* ===== è²¼æ–‡å¡ç‰‡ ===== */
    .postCard {
      background: var(--card);
      margin: 12px;
      border-radius: 12px;
      padding: 12px;
      cursor: pointer;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }
    .postHeader, .detailHeader {
      display: flex;
      align-items: center;
      position: relative;
    }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 8px;
      object-fit: cover;
      border: 1px solid var(--line);
    }
    .postMeta {
      flex: 1;
    }
    .time {
      font-size: 12px;
      color: var(--ghost);
    }
    .translateBtn {
      position: absolute;
      right: 12px;
      top: 12px;
      border: 1px solid var(--line);
      background: var(--hover);
      border-radius: 12px;
      padding: 4px 8px;
      font-size: 12px;
      cursor: pointer;
    }
    .postImg {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
      border-radius: 8px;
      margin-top: 8px;
    }
    .postReactions {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }
    .postReactions button {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }
    .postReactions span {
      margin-left: 4px;
    }
    .postFooter {
      margin-top: 8px;
      color: var(--sub);
      font-size: 13px;
    }

    /* ===== DM åˆ—è¡¨ ===== */
    .dmBox {
      padding: 12px;
    }
    .dmCard {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--card);
      padding: 12px;
      margin-bottom: 8px;
      border-radius: 12px;
      cursor: pointer;
    }
    .dmCard .left {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .badge {
      background: red;
      color: white;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
    }

    /* ===== DM è©³æƒ… ===== */
    .dmThread {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow-y: auto;
      max-height: 60vh;
    }
    .msg {
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 70%;
      word-break: break-word;
      font-size: 14px;
      position: relative;
    }
    .msg.left {
      background: var(--card);
      align-self: flex-start;
    }
    .msg.right {
      background: var(--accent);
      color: white;
      align-self: flex-end;
    }
    .readStatus {
      font-size: 10px;
      background: white;
      color: var(--accent);
      padding: 2px 6px;
      border-radius: 999px;
      margin-left: 8px;
    }
    .dmInputBar {
      display: flex;
      border-top: 1px solid var(--line);
      padding: 8px;
      gap: 8px;
    }
    .dmInputBar input {
      flex: 1;
      padding: 8px;
      border-radius: 12px;
      border: 1px solid var(--line);
    }

    /* ===== ç›´æ’­åˆ—è¡¨ ===== */
    .liveCard {
      display: flex;
      gap: 12px;
      background: var(--card);
      padding: 12px;
      border-radius: 12px;
      margin: 12px;
      cursor: pointer;
    }
    .liveCard img {
      width: 100px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
    }
    .liveMeta {
      flex: 1;
      font-size: 14px;
    }

    /* ===== ç›´æ’­èŠå¤©å®¤ ===== */
    .liveThread {
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      height: 50vh;
      overflow-y: auto;
    }
    .liveMsg {
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 70%;
    }
    .liveMsg.host {
      background: var(--accent);
      color: white;
      align-self: flex-start;
    }
    .liveMsg.fan {
      background: var(--hover);
      align-self: flex-end;
    }
    .liveInputBar {
      display: flex;
      border-top: 1px solid var(--line);
      padding: 8px;
      gap: 8px;
    }
    .liveInputBar input {
      flex: 1;
      padding: 8px;
      border-radius: 12px;
      border: 1px solid var(--line);
    }

    /* ===== å›æ”¾ ===== */
    .replayControls {
      padding: 8px;
      border-top: 1px solid var(--line);
      text-align: right;
    }
  </style>
</head>
<body>
    <!-- ===== é¦–é  ===== -->
  <div id="home" class="page active">
    <div class="topbar"><b>é¦–é </b></div>
    <!-- Story Bar -->
    <div class="storyBar" id="storyBar"></div>
    <!-- è²¼æ–‡åˆ—è¡¨ -->
    <div id="postList"></div>
  </div>

  <!-- ===== è²¼æ–‡è©³æƒ…é  ===== -->
  <div id="postDetail" class="page">
    <div class="topbar">
      <button onclick="showPage('home')">â†</button>
      <b>è²¼æ–‡è©³æƒ…</b>
    </div>
    <div id="postDetailContent"></div>
    <div class="commentBar">
      <span id="commentCount"></span>
      <label><input type="checkbox" id="filterCheck"> <span id="filterLabel">åªçœ‹ADPçš„è©•è«–</span></label>
    </div>
    <div id="commentList"></div>
    <div class="commentInput">
      <input id="commentInput" type="text" placeholder="è«‹è¼¸å…¥è©•è«–">
      <button onclick="addComment()">â¤</button>
    </div>
  </div>

  <!-- ===== DM åˆ—è¡¨ ===== -->
  <div id="dmList" class="page">
    <div class="topbar"><b>è¨Šæ¯</b></div>
    <div class="dmBox" id="dmListBox"></div>
  </div>

  <!-- ===== DM è©³æƒ…é  ===== -->
  <div id="dmDetail" class="page">
    <div class="topbar">
      <button onclick="showPage('dmList')">â†</button>
      <b id="dmTitle"></b>
    </div>
    <div class="dmThread" id="dmBox"></div>
    <div class="dmInputBar">
      <input id="dmInput" type="text" placeholder="è¼¸å…¥è¨Šæ¯">
      <button onclick="sendDm()">â¤</button>
    </div>
  </div>

  <!-- ===== ç›´æ’­åˆ—è¡¨ ===== -->
  <div id="liveList" class="page">
    <div class="topbar"><b>ç›´æ’­</b></div>
    <div id="liveBox"></div>
  </div>

  <!-- ===== ç›´æ’­é–“ ===== -->
  <div id="liveRoom" class="page">
    <div class="topbar">
      <button onclick="showPage('liveList')">â†</button>
      <b id="liveTitle"></b>
    </div>
    <div class="liveThread" id="liveChat"></div>
    <div class="liveInputBar">
      <input id="liveInput" type="text" placeholder="è¼¸å…¥è¨Šæ¯">
      <button onclick="sendLiveMsg()">â¤</button>
    </div>
  </div>

  <!-- ===== å›æ”¾é  ===== -->
  <div id="replayPage" class="page">
    <div class="topbar">
      <button onclick="showPage('liveList')">â†</button>
      <b>ç›´æ’­å›æ”¾</b>
    </div>
    <video id="replayVideo" src="sample.mp4" controls style="width:100%;max-height:50vh"></video>
    <div class="replayControls">
      <button onclick="setSpeed(0.5)">0.5x</button>
      <button onclick="setSpeed(1)">1x</button>
      <button onclick="setSpeed(1.5)">1.5x</button>
      <button onclick="setSpeed(2)">2x</button>
    </div>
  </div>

<script>
/* ===== å‡è³‡æ–™ ===== */
const POSTS = [
  {id:'p1', artistName:'ANNIE', avatar:'annie.jpg', ts:'3å°æ™‚å‰', text:'last one just for my day onesâœ¨ğŸ°', img:'annie_post.jpg', reactions:{'ğŸ‘':717,'ğŸ˜':538,'ğŸ˜‚':234,'ğŸ¼':177,'ğŸ˜­':110}},
  {id:'p2', artistName:'DOHEE', avatar:'dohee.jpg', ts:'5å°æ™‚å‰', text:'ì˜¤ëŠ˜ë„ ê³ ë§ˆì›Œìš” ğŸ’œ', img:'dohee_post.jpg', reactions:{'ğŸ‘':321,'ğŸ˜':455,'ğŸ˜‚':120,'ğŸ¼':66,'ğŸ˜­':87}}
];
let COMMENTS = {
  p1:[{user:'íŒ¬1', text:'ë„ˆë¬´ ì˜ˆë»ìš”!'},{user:'íŒ¬2', text:'day one ğŸ¥¹'}],
  p2:[{user:'íŒ¬3', text:'ì‚¬ë‘í•´ìš”!'},{user:'íŒ¬4', text:'dohee ìµœê³ !'}]
};
const DM_ARTISTS = [
  {id:'a1', name:'ANNIE', avatar:'annie.jpg', unread:1},
  {id:'a2', name:'DOHEE', avatar:'dohee.jpg', unread:0}
];
let dmMessages = {
  a1:[{id:'m1',from:'left',text:'ì˜¤ëŠ˜ ë­í•´?'},
      {id:'m2',from:'right',text:'ì—°ìŠµì¤‘ì´ì•¼~'}],
  a2:[{id:'m3',from:'left',text:'ë°¥ ë¨¹ì—ˆì–´?'}]
};
const LIVES = [
  {id:'l1', title:'Annie Live', thumb:'live1.jpg', status:'on'},
  {id:'l2', title:'Dohee Live', thumb:'live2.jpg', status:'soon'},
  {id:'l3', title:'Full Group Replay', thumb:'live3.jpg', status:'end'}
];

/* ===== å…¨åŸŸè®Šæ•¸ ===== */
let CURRENT_POST_ID = null;
let CURRENT_ARTIST_NAME = null;
let currentChat = null;

/* ===== é é¢åˆ‡æ› ===== */
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ===== Story ===== */
function renderStoryBar(){
  const bar = document.getElementById('storyBar');
  bar.innerHTML = POSTS.map(p=>`
    <div class="storyCircle" onclick="filterByArtist('${p.artistName}')">
      <img src="${p.avatar}">
      <span>${p.artistName}</span>
    </div>
  `).join('');
}

/* ===== è²¼æ–‡ ===== */
function renderPosts(){
  const list = document.getElementById('postList');
  list.innerHTML = POSTS.map(p=>`
    <div class="postCard" onclick="openPost('${p.id}')">
      <div class="postHeader">
        <img src="${p.avatar}" class="avatar">
        <div class="postMeta"><b>${p.artistName}</b><br><span class="time">${p.ts}</span></div>
        <button class="translateBtn">ç¿»è­¯</button>
      </div>
      <p>${p.text}</p>
      ${p.img ? `<img src="${p.img}" class="postImg">` : ''}
      <div class="postReactions">
        ${Object.entries(p.reactions).map(([emoji,num])=>`<button>${emoji}<span>${num}</span></button>`).join('')}
      </div>
    </div>
  `).join('');
}

function openPost(postId){
  const post = POSTS.find(p=>p.id===postId);
  if(!post) return;
  CURRENT_POST_ID = postId;
  CURRENT_ARTIST_NAME = post.artistName;
  document.getElementById('filterLabel').textContent = `åªçœ‹ ${post.artistName} çš„å›è¦†`;

  const content = `
    <div class="card soft postCard">
      <div class="detailHeader">
        <img src="${post.avatar}" class="avatar">
        <div class="postMeta"><b>${post.artistName}</b><br><span class="time">${post.ts}</span></div>
        <div class="translateBtn">ç¿»è­¯</div>
      </div>
      <p id="postText-${post.id}" style="margin-top:8px">${post.text}</p>
      ${post.img ? `<img class="postImg" src="${post.img}">` : ''}
      <div class="postReactions">
        ${Object.entries(post.reactions).map(([emoji,num])=>`<button>${emoji}<span>${num}</span></button>`).join('')}
      </div>
    </div>
  `;
  document.getElementById('postDetailContent').innerHTML = content;
  renderComments();
  showPage('postDetail');
}

function renderComments(){
  const list = COMMENTS[CURRENT_POST_ID] || [];
  document.getElementById('commentCount').textContent = `å…¨éƒ¨ ${list.length}`;
  document.getElementById('commentList').innerHTML = list.map(c=>`<p><b>${c.user}:</b> ${c.text}</p>`).join('');
}
function addComment(){
  const val = document.getElementById('commentInput').value.trim();
  if(!val) return;
  COMMENTS[CURRENT_POST_ID].push({user:'æˆ‘', text:val});
  document.getElementById('commentInput').value = '';
  renderComments();
}

/* ===== DM ===== */
function renderDMList(){
  const box = document.getElementById('dmListBox');
  box.innerHTML = DM_ARTISTS.map(a=>`
    <div class="dmCard" onclick="openDm('${a.id}')">
      <div class="left">
        <img src="${a.avatar}" class="avatar">
        <div><b>${a.name}</b></div>
      </div>
      ${a.unread ? `<div class="badge">${a.unread}</div>` : ''}
    </div>
  `).join('');
}
function openDm(chatId){
  currentChat = chatId;
  const artist = DM_ARTISTS.find(a=>a.id===chatId);
  if(!artist) return;
  document.getElementById('dmTitle').textContent = artist.name;
  artist.unread = 0;
  renderDMList();
  renderDm(chatId);
  showPage('dmDetail');
}
function renderDm(chatId){
  const box = document.getElementById('dmBox');
  const list = dmMessages[chatId] || [];
  box.innerHTML = list.map(m=>`
    <div class="msg ${m.from}">${m.text}</div>
  `).join('');
  box.scrollTop = box.scrollHeight;
}
function sendDm(){
  const val = document.getElementById('dmInput').value.trim();
  if(!val) return;
  dmMessages[currentChat].push({id:'x'+Math.random(),from:'right',text:val});
  document.getElementById('dmInput').value = '';
  renderDm(currentChat);
}

/* ===== Live ===== */
function renderLives(){
  const box = document.getElementById('liveBox');
  box.innerHTML = LIVES.map(l=>`
    <div class="liveCard" onclick="openLive('${l.id}')">
      <img src="${l.thumb}">
      <div class="liveMeta">
        <b>${l.title}</b><br>
        <span>${l.status==='on'?'é€²è¡Œä¸­':l.status==='soon'?'å³å°‡é–‹å§‹':'å·²çµæŸ'}</span>
      </div>
    </div>
  `).join('');
}
function openLive(id){
  const live = LIVES.find(l=>l.id===id);
  if(!live) return;
  if(live.status==='end'){
    showPage('replayPage');
    return;
  }
  document.getElementById('liveTitle').textContent = live.title;
  renderLiveChat();
  showPage('liveRoom');
}
function renderLiveChat(){
  const chat = document.getElementById('liveChat');
  chat.innerHTML = `<div class="liveMsg host">ğŸ¤ æ­¡è¿ä¾†åˆ°ç›´æ’­</div>`;
}
function sendLiveMsg(){
  const val = document.getElementById('liveInput').value.trim();
  if(!val) return;
  const chat = document.getElementById('liveChat');
  chat.innerHTML += `<div class="liveMsg fan">${val}</div>`;
  document.getElementById('liveInput').value = '';
  chat.scrollTop = chat.scrollHeight;
}

/* ===== å›æ”¾é€Ÿåº¦ ===== */
function setSpeed(s){
  document.getElementById('replayVideo').playbackRate = s;
}

/* ===== åˆå§‹åŒ– ===== */
renderStoryBar();
renderPosts();
renderDMList();
renderLives();
</script>
</body>
</html>
